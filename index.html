<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>DV CÃ¼zdan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ff66">

<style>
body{
 margin:0;
 font-family:Segoe UI,Arial;
 background:linear-gradient(160deg,#0b0b0b,#121212);
 color:white
}
.hidden{display:none}
header{
 text-align:center;
 padding:20px 10px;
 font-size:34px;
 font-weight:bold
}
.d{color:#00ff66}.v{color:orange}
.container{max-width:480px;margin:auto}
.card{
 background:#181818;
 margin:15px;
 padding:15px;
 border-radius:16px;
 box-shadow:0 5px 20px rgba(0,0,0,.4)
}
input,button{
 width:100%;
 padding:12px;
 margin-top:8px;
 border-radius:10px;
 border:none;
 font-size:16px
}
button{background:#00aa55;color:white}
.red{background:#cc3333}
.orange{background:orange;color:black}
.blue{background:#3399ff}
.balance{text-align:center;font-size:34px;margin:10px 0}
.tx{border-bottom:1px solid #333;padding:8px 0;font-size:14px}
.stat{display:flex;justify-content:space-between;padding:6px 0}
small{opacity:.7}
.warn{color:#ffaa00;font-size:14px;text-align:center}
</style>
</head>

<body>

<header>
 <span class="d">D</span><span class="v">V</span> CÃ¼zdan
</header>

<div class="container">

<!-- AUTH -->
<div id="auth" class="card">
 <h3>ğŸ” GiriÅŸ / KayÄ±t</h3>
 <input id="user" placeholder="KullanÄ±cÄ± adÄ±">
 <input id="email" placeholder="E-posta">
 <input id="pass" type="password" placeholder="Åifre">
 <input id="pin" type="password" placeholder="PIN (4 hane)">
 <button onclick="login()">Devam Et</button>
 <p class="warn" id="verifyMsg"></p>
</div>

<!-- WALLET -->
<div id="wallet" class="hidden">

<div class="card">
 <div class="balance" id="bal">0 DV</div>
</div>

<div class="card">
 <input id="amt" type="number" placeholder="DV miktarÄ±">
 <button onclick="add()">â• Ekle</button>
 <button class="red" onclick="sub()">â– Ã‡Ä±kar</button>
 <button class="red" onclick="withdraw()">ğŸ’¸ Para Ã‡ek</button>
</div>

<div class="card">
 <h3>ğŸ“¤ DV GÃ¶nder</h3>
 <input id="to" placeholder="AlÄ±cÄ± kullanÄ±cÄ±">
 <input id="send" type="number" placeholder="DV miktarÄ±">
 <button class="orange" onclick="transfer()">GÃ¶nder</button>
</div>

<div class="card">
 <h3>ğŸ“œ Ä°ÅŸlem GeÃ§miÅŸi</h3>
 <div id="log"></div>
</div>

<div id="adminBox" class="card hidden">
 <h3>ğŸ‘‘ Admin Panel</h3>
 <input id="mintUser" placeholder="KullanÄ±cÄ±">
 <input id="mintAmount" type="number" placeholder="BasÄ±lacak DV">
 <button class="blue" onclick="mint()">ğŸ’° Para Bas</button>
 <div id="stats"></div>
</div>

<div class="card">
 <button onclick="logout()" class="red">Ã‡Ä±kÄ±ÅŸ</button>
</div>

</div>
</div>

<script>
let users = JSON.parse(localStorage.getItem("dv_users")) || {};
let current=null;

function login(){
 let u=user.value,p=pass.value,pi=pin.value,em=email.value;
 if(!u||!p||pi.length<4||!em) return alert("Eksik bilgi");

 if(!users[u]){
  users[u]={
   pass:p,pin:pi,email:em,
   verified:false,balance:0,chain:[],isAdmin:false
  };
  verifyMsg.innerText="ğŸ“© DoÄŸrulama maili gÃ¶nderildi (simÃ¼lasyon)";
  save();
  return;
 }

 if(users[u].pass!==p||users[u].pin!==pi)
  return alert("HatalÄ± bilgi");

 if(!users[u].verified && !(u==="admin"&&p==="DV-ADMIN")){
  verifyMsg.innerText="â— Mail doÄŸrulanmadan giriÅŸ yapÄ±lamaz";
  return;
 }

 if(u==="admin"&&p==="DV-ADMIN"){
  users[u].isAdmin=true;
  users[u].balance=Infinity;
 }

 current=u;
 auth.classList.add("hidden");
 wallet.classList.remove("hidden");
 if(users[u].isAdmin) adminBox.classList.remove("hidden");
 render();
}

function verifyEmail(username){
 users[username].verified=true;
 save();
}

function add(){let a=+amt.value;if(a<=0)return;
 if(!users[current].isAdmin)users[current].balance+=a;
 block("â• Eklendi",a);}
function sub(){let a=+amt.value;if(a<=0)return;
 if(!users[current].isAdmin&&a>users[current].balance)return;
 if(!users[current].isAdmin)users[current].balance-=a;
 block("â– Ã‡Ä±karÄ±ldÄ±",a);}
function withdraw(){
 if(users[current].isAdmin)return alert("Admin âˆ");
 let a=prompt("DV:");
 a=parseFloat(a);
 if(!a||a>users[current].balance)return;
 users[current].balance-=a;
 block("ğŸ’¸ Ã‡ekildi",a);
}
function transfer(){
 let t=to.value,a=+send.value;
 if(!users[t]||!a)return;
 if(!users[current].isAdmin&&a>users[current].balance)return;
 if(!users[current].isAdmin)users[current].balance-=a;
 users[t].balance+=a;
 block("ğŸ“¤ GÃ¶nderildi â†’ "+t,a);
}

function mint(){
 let u=mintUser.value,a=+mintAmount.value;
 if(!users[u]||a<=0)return;
 users[u].balance+=a;
 block("ğŸ‘‘ Admin Para BastÄ± â†’ "+u,a);
}

function block(type,amt){
 let c=users[current].chain;
 let prev=c.length?c[c.length-1].hash:"GENESIS";
 let hash=btoa(type+amt+Date.now()).slice(0,20);
 c.push({type,amt,hash,time:new Date().toLocaleString()});
 save();render();
}

function render(){
 bal.innerText=users[current].isAdmin?"âˆ DV":users[current].balance+" DV";
 log.innerHTML=users[current].chain.map(b=>`
 <div class="tx">${b.type} ${b.amt} DV<br>
 <small>${b.time}<br>${b.hash}</small></div>`).join("");
}

function save(){localStorage.setItem("dv_users",JSON.stringify(users))}
function logout(){location.reload()}
</script>

</body>
</html>
